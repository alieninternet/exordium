# This file is a part of Exordium Network Services - (c) 2002 IRCDome Development Team
# $Author$
# $Date$
# $Id$

SUB_DIRS=source/lib source source/modules
AUTOGEN_SUB_DIRS=include src

########################################################################

.PHONY: all install clean distclean autogen dready sums distro fresh


# Make the package
all:
	for d in $(SUB_DIRS); \
		do $(MAKE) -C $$d; \
	done


clean:
	for d in $(SUB_DIRS); \
		do $(MAKE) -C $$d clean; \
	done
	$(RM) *~ include/*~

distclean:
	for d in $(SUB_DIRS); \
		do $(MAKE) -C $$d distclean; \
	done
	$(RM) -r *~ include/*~ autom* config* Makefile
	
dump:
	mysqldump --all --complete-insert -e --add-locks --delayed-insert --lock-tables services >db-dump.sql
	mysqldump --all --complete-insert -e --add-locks --delayed-insert --lock-tables --xml services >db-dump.xml
	gzip -v9 db-dump.sql
	gzip -v9 db-dump.xml
	
