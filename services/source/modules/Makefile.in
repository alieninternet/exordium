# $Id$
DEFINES=-DHAVE_CONFIG_H
RM=@RM@
CXX=@CXX@
#CXXFLAGS=-g -Wall -Winline -Werror -pg -O0 -fmemoize-lookups
CXXFLAGS=@CXXFLAGS@
INCDIRS=-I../../include -I../../../kineircd/src/lib -I../../../kineircd/include -I/usr/local/mysql/include
LDFLAGS=
LIBS=-lmysqlclient

INCLUDES=/../include

SOURCES=\
	bot.cpp \
	chan.cpp \
	nick.cpp \
	note.cpp \
	oper.cpp \
#	serv.cpp \
#	stats.cpp \
#	vote.cpp
	
OBJECTS=$(SOURCES:.cpp=.so)


SUBDIRS=\
	game \
	love

.PHONY: all $(SUB_DIRS)

all: all-recursive $(OBJECTS)

%.so: %.cpp
	$(CXX) $(CXXFLAGS) $(LDFLAGS) $(DEFS) $(INCDIRS) -I/usr/local/ssl/include -shared $< -o $@ -lservices -L../lib

clean: clean-recursive
	$(RM) *.so modules

distclean: distclean-recursive
	$(RM) *.so modules Makefile

all-recursive clean-recursive distclean-recursive:
	@target=`echo $@ | sed s/-recursive//`; \
	list='$(SUBDIRS)'; for subdir in $$list; do \
	      echo "Making $$target in $$subdir"; \
	      (cd $$subdir && $(MAKE) $$target) \
	      || exit 1; \
	done;
