# $Id$
DEFINES=-DHAVE_CONFIG_H
RM=@RM@
CXX=@CXX@
#CXXFLAGS=-g -Wall -Winline -Werror -pg -O0 -fmemoize-lookups
CXXFLAGS=-g3 -Wall -Werror -O0 -fpic -ggdb3 -pg -fno-rtti -fvtable-gc 
INCDIRS=-I../../include -I../../../kineircd/src/lib -I../../../kineircd/include -I/usr/local/mysql/include
LDFLAGS=
LIBS=-lmysqlclient

INCLUDES=/../include

SOURCES=\
	bot.cpp \
	chan.cpp \
	nick.cpp \
	note.cpp \
	oper.cpp \
	serv.cpp \
	stats.cpp \
	vote.cpp
	
OBJECTS=$(SOURCES:.cpp=.so)


SUB_DIRS=\
	game \
	love

.PHONY: all subdirs $(SUB_DIRS)

all: subdirs $(OBJECTS)

subdirs: $(SUB_DIRS)

$(SUB_DIRS):
	$(MAKE) -C $@

%.so: %.cpp
	$(CXX) $(CXXFLAGS) $(LDFLAGS) $(DEFS) $(INCDIRS) -I/usr/local/ssl/include -shared $< -o $@ -lservices -L../lib

clean:
	$(RM) *.so modules

distclean:
	$(RM) *.so modules Makefile

