DEFINES=
RM=@RM@
CXX=@CXX@
#CXXFLAGS=-g -Wall -Winline -Werror -pg -O0 -fmemoize-lookups
CXXFLAGS=@CXXFLAGS@ -nostdlib -I/usr/local/ssl/include -g3 -Wall -Werror -O0 -fpic -ggdb3 -pg -fno-rtti -fvtable-gc
LDFLAGS=@LDFLAGS@
LIBS=@LIBS@

SOURCES=\
	channel.cpp \
	conf.cpp \
	ircdome.cpp \
	log.cpp \
	nickname.cpp \
	parser.cpp \
	services.cpp \
	sql.cpp
	
INCLUDES=../../include

OBJECTS=$(SOURCES:.cpp=.o)

TARGET=libservices.so

all: $(TARGET)

$(TARGET): $(OBJECTS)
	$(CXX) -shared -ldl -W1,-soname=libservices.so -o libservices.so $(OBJECTS) ../../../kineircd/src/lib/.libs/libkineircd.so $(LDFLAGS) -lmysqlclient

%.o: %.cpp
	$(CXX) $(CXXFLAGS) -I$(INCLUDES) -I/usr/local/mysql/include/ -I../../../kineircd/include -I../../../kineircd/src/lib -I../include/  -c $< 


clean:
	$(RM) *.o *~ libservices.so

distclean:
	$(RM) *.o *~ libservices.so Makefile

pretty:
	indent *.cpp
	indent *.h
	$(RM) *~

modules:
	$(CXX) -I../include -I../../kineircd/include -I/usr/local/mysql/include -shared -o love.so love.cpp


